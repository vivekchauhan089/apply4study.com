import{r as a,j as S}from"./chunk-C2d9lkPd.js";var y=new Map,h=new WeakMap,j=0,m=void 0;function A(e){return e?(h.has(e)||(j+=1,h.set(e,j.toString())),h.get(e)):"0"}function O(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?A(e.root):e[t]}`).toString()}function z(e){const t=O(e);let s=y.get(t);if(!s){const o=new Map;let c;const i=new IntersectionObserver(n=>{n.forEach(r=>{var u;const g=r.isIntersecting&&c.some(f=>r.intersectionRatio>=f);e.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=g),(u=o.get(r.target))==null||u.forEach(f=>{f(g,r)})})},e);c=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:t,observer:i,elements:o},y.set(t,s)}return s}function L(e,t,s={},o=m){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const u=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:typeof s.threshold=="number"?s.threshold:0,time:0,boundingClientRect:u,intersectionRect:u,rootBounds:u}),()=>{}}const{id:c,observer:i,elements:n}=z(s),r=n.get(e)||[];return n.has(e)||n.set(e,r),r.push(t),i.observe(e),function(){r.splice(r.indexOf(t),1),r.length===0&&(n.delete(e),i.unobserve(e)),n.size===0&&(i.disconnect(),y.delete(c))}}function M({threshold:e,delay:t,trackVisibility:s,rootMargin:o,root:c,triggerOnce:i,skip:n,initialInView:r,fallbackInView:u,onChange:g}={}){var f;const[l,V]=a.useState(null),b=a.useRef(g),[R,p]=a.useState({inView:!!r,entry:void 0});b.current=g,a.useEffect(()=>{if(n||!l)return;let v;return v=L(l,(I,x)=>{p({inView:I,entry:x}),b.current&&b.current(I,x),x.isIntersecting&&i&&v&&(v(),v=void 0)},{root:c,rootMargin:o,threshold:e,trackVisibility:s,delay:t},u),()=>{v&&v()}},[Array.isArray(e)?e.toString():e,l,c,o,i,n,s,u,t]);const w=(f=R.entry)==null?void 0:f.target,E=a.useRef(void 0);!l&&w&&!i&&!n&&E.current!==w&&(E.current=w,p({inView:!!r,entry:void 0}));const d=[V,R.inView,R.entry];return d.ref=d[0],d.inView=d[1],d.entry=d[2],d}function _({src:e,alt:t,className:s,fetchPriority:o="low"}){const{ref:c,inView:i}=M({triggerOnce:!0,threshold:.1}),[n,r]=a.useState(null);return a.useEffect(()=>{i&&r(e)},[i,e]),S.jsx("div",{ref:c,children:n?S.jsx("img",{src:n,alt:t,className:s,loading:o=="high"?"eager":"lazy",decoding:"async",fetchPriority:o}):S.jsx("div",{style:{height:"200px",background:"#f0f0f0"}})})}export{_ as L,M as u};
